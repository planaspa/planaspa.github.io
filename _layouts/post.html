---
layout: default
minread: 0
---
<article class="post-container">
    <header class="post-header">
        <div class="post-title">{{ page.title }}</div><br/>
        <div class="post-meta">
            <div class="post-meta-left">
                <img width="50" height="50" src="{{ "page.profile_pic }}" | relative_url }}"/>
            </div>
            <div class="post-meta-mid">
                <span class="fa-1x">{{ page.author }}</span>
                <br/>
                <time class="post-dt-published fa-sm">
                    {%- assign date_format = "%b %-d, %Y" -%}
                    {{ page.date | date: date_format }} - 
                </time>
                <span class="post-dt-published fa-sm"">
                    {%- assign words = page.content | strip_html | number_of_words -%}
                    {%- assign min_read= words | divided_by: 180 -%}
                    {{ min_read }} min lectura
                </span>
            </div>
            <div class="post-meta-right">
                <!-- <i class="fas fa-share-alt"></i> -->
            </div>
        </div>
    </header>

    <div class="post-content">
        {{ content }}
    </div>

<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<link rel="stylesheet" href="{{ "/assets/flickity/flickity.css" | relative_url }}"/>
<script src="{{ "/assets/flickity/flickity.pkgd.min.js" | relative_url }}"></script>

    {% if site.related_posts != empty %}

        {% comment %}
        maxRelated: the maximum number of related to posts to be printed
        minCommonTags: the minimum number of common tags to have for a post to be considered as a related post 
        {% endcomment %}

        {% assign maxRelated = 5 %}
        {% assign minCommonTags =  1 %}
        {% assign maxRelatedCounter = 0 %}

        <div class="divider"></div>
        <h2>Posts relacionados...</h2>
        <div class="carousel-wrapper">
          <div class="carousel" data-flickity>
            
            {% for post in site.related_posts %}

                {% assign sameTagCount = 0 %}
                {% assign commonTags = '' %}

                {% for tag in post.tags %}

                    {% if post.url != page.url %}
                        {% if page.tags contains tag %}
                        {% assign sameTagCount = sameTagCount | plus: 1 %}
                        {% capture tagmarkup %} <span class="label label-default">{{ tag }}</span> {% endcapture %}
                        {% assign commonTags = commonTags | append: tagmarkup %}
                        {% endif %}
                    {% endif %}
                {% endfor %}

                {% if sameTagCount >= minCommonTags %}
                    <div class="carousel-cell">
                        <a href="{{ post.url }}">
                            <div class="carousel-cell-left">
                                <img src="{{ post.post_pic | relative_url }}"/>
                            </div>
                            <div class="carousel-cell-right">
                                <div class="carousel-cell-title">{{ post.title }}</div>
                                <div class="carousel-cell-summary">{{ post.summary }}</div>
                            </div>
                        </a>
                    </div>
                    {% assign maxRelatedCounter = maxRelatedCounter | plus: 1 %}
                    {% if maxRelatedCounter >= maxRelated %}
                        {% break %}
                    {% endif %}
                {% endif %}

            {% endfor %}
            </div>
        </div>
    {% endif %}        

</article>